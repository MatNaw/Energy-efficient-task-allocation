# Author: Mateusz Nawrot

################## Sets ##################
set SERVERS := S1 S2 S3 S4;
# SE1 - VM is turned off
# SE2 - VM is running in idle mode
set SERVERS_EAS := SE1 SE2 SE3 SE4 SE5 SE6 SE7 SE8 SE9 SE10 SE11 SE12;
set LINKS := L1 L2 L3 L4 L5 L6 L7 L8 L9 L10 L11 L12 L13 L14 L15 L16;
set LINKS_EAS := LE1 LE2;
set ROUTERS := R1 R2;
# set DEMANDS := D1 D2 D3 D4;
set VMS := V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17 V18 V19 V20
 V21 V22 V23 V24 V25 V26 V27 V28 V29 V30 V31 V32 V33 V34 V35 V36 V37 V38 V39 V40;
 # V21 V22 V23 V24 V25 V26 V27 V28 V29 V30 V31;

################## Servers ##################
######### Old servers EAS
param old_server_in_eas:
	SE1	SE2	SE3	SE4 SE5 SE6 SE7 SE8 SE9 SE10 SE11 SE12	:=
S1	0	0	1	0	0	0 	0	0	0		0	0	0
S2	0	0	1	0	0	0 	0	0	0		0	0	0
S3	0	0	1	0	0	0 	0	0	0		0	0	0
S4	0	0	1	0	0	0 	0	0	0		0	0	0
;
######### Servers I/O
param server_input:
	S1	S2	S3	S4	:=
L1	0	0	0	0
L2	1	0	0	0
L3	0	0	0	0
L4	0	1	0	0
L5	0	0	0	0
L6	0	0	1	0
L7	0	0	0	0
L8	0	0	0	1
L9	0	0	0	0
L10	1	0	0	0
L11	0	0	0	0
L12	0	1	0	0
L13	0	0	0	0
L14	0	0	1	0
L15	0	0	0	0
L16	0	0	0	1
;
param server_output:
	S1	S2	S3	S4	:=
L1	1	0	0	0
L2	0	0	0	0
L3	0	1	0	0
L4	0	0	0	0
L5	0	0	1	0
L6	0	0	0	0
L7	0	0	0	1
L8	0	0	0	0
L9	1	0	0	0
L10	0	0	0	0
L11	0	1	0	0
L12	0	0	0	0
L13	0	0	1	0
L14	0	0	0	0
L15	0	0	0	1
L16	0	0	0	0
;
######### Servers efficiency
###### Number of operations per second in every load state [op/s]:
### HP ML110 G3:
# S1	0		0		5350	10574	16060	20925	26287	32041	36786	42111	46820	52303
### HP ML110 G4:
# S1	0		0		5712	10776	16312	22139	26801	33168	37963	44054	49096	54479
### HP ML110 G5:
# S1	0		0		9995	19617	29715	38981 	49267	59625	69212	79692 	90167	98472
### IBM x3250 M3 (Xeon X3470):
# S1	0		0		31024	62958	93818	126143 	156517	190454	220822	252911 	283126	313804
### IBM x3250 M3 (Xeon X3480):
# S1	0		0		32518	63715	96931	128583 	163897	192424	229041	259744 	291998	320730
### IBM x3550 M3 (Xeon X5670):
# S1	0		0		92523	183593	274137	366302 	458004	553056	641449	735396 	825710	912178
### IBM x3550 M3 (Xeon X5675):
# S1	0		0		89918	179398	268151	357958 	446975	535435	626127	717822 	806317	890651
param server_efficiency_in_eas:
	SE1		SE2		SE3		SE4		SE5		SE6		SE7		SE8		SE9		SE10	SE11	SE12	:=
### HP ML110 G3:
S1	0		0		5350	10574	16060	20925	26287	32041	36786	42111	46820	52303
S2	0		0		5350	10574	16060	20925	26287	32041	36786	42111	46820	52303
S3	0		0		5350	10574	16060	20925	26287	32041	36786	42111	46820	52303
S4	0		0		5350	10574	16060	20925	26287	32041	36786	42111	46820	52303
### HP ML110 G4:
# S1	0		0		5712	10776	16312	22139	26801	33168	37963	44054	49096	54479
# S2	0		0		5712	10776	16312	22139	26801	33168	37963	44054	49096	54479
# S3	0		0		5712	10776	16312	22139	26801	33168	37963	44054	49096	54479
# S4	0		0		5712	10776	16312	22139	26801	33168	37963	44054	49096	54479
### HP ML110 G5:
# S1	0		0		9995	19617	29715	38981 	49267	59625	69212	79692 	90167	98472
# S2	0		0		9995	19617	29715	38981 	49267	59625	69212	79692 	90167	98472
# S3	0		0		9995	19617	29715	38981 	49267	59625	69212	79692 	90167	98472
# S4	0		0		9995	19617	29715	38981 	49267	59625	69212	79692 	90167	98472
### IBM x3250 M3 (Xeon X3470):
# S1	0		0		31024	62958	93818	126143 	156517	190454	220822	252911 	283126	313804
# S2	0		0		31024	62958	93818	126143 	156517	190454	220822	252911 	283126	313804
# S3	0		0		31024	62958	93818	126143 	156517	190454	220822	252911 	283126	313804
# S4	0		0		31024	62958	93818	126143 	156517	190454	220822	252911 	283126	313804
### IBM x3250 M3 (Xeon X3480):
# S1	0		0		32518	63715	96931	128583 	163897	192424	229041	259744 	291998	320730
# S2	0		0		32518	63715	96931	128583 	163897	192424	229041	259744 	291998	320730
# S3	0		0		32518	63715	96931	128583 	163897	192424	229041	259744 	291998	320730
# S4	0		0		32518	63715	96931	128583 	163897	192424	229041	259744 	291998	320730
### IBM x3550 M3 (Xeon X5670):
# S1	0		0		92523	183593	274137	366302 	458004	553056	641449	735396 	825710	912178
# S2	0		0		92523	183593	274137	366302 	458004	553056	641449	735396 	825710	912178
# S3	0		0		92523	183593	274137	366302 	458004	553056	641449	735396 	825710	912178
# S4	0		0		92523	183593	274137	366302 	458004	553056	641449	735396 	825710	912178
### IBM x3550 M3 (Xeon X5675):
# S1	0		0		89918	179398	268151	357958 	446975	535435	626127	717822 	806317	890651
# S2	0		0		89918	179398	268151	357958 	446975	535435	626127	717822 	806317	890651
# S3	0		0		89918	179398	268151	357958 	446975	535435	626127	717822 	806317	890651
# S4	0		0		89918	179398	268151	357958 	446975	535435	626127	717822 	806317	890651
;
######### Servers energetic cost
###### Average active power consumption in every load state [W]:
### HP ML110 G3:
# S1	0		105		112		118		125		131		137		147		153		157		164		169
### HP ML110 G4:
# S1	0		86		89.4	92.6	96		99.5	102		106		108		112		114		117
### HP ML110 G5:
# S1	0		93.7	97		101		105		110		116		121		125		129		133		135
### IBM x3250 M3 (Xeon X3470):
# S1	0		41.6	46.7	52.3	57.9	65.4	73		80.7	89.5	99.6	105		113
### IBM x3250 M3 (Xeon X3480):
# S1	0		42.3	46.7	49.7	55.4	61.8	69.3	76.1	87		96.1	106		113
### IBM x3550 M3 (Xeon X5670):
# S1	0		66		107		120		131		143		156		173		191		211		229		247
### IBM x3550 M3 (Xeon X5675):
# S1	0		58.4	98		109		118		128		140		153		170		189		205		222
param server_energetic_cost:
	SE1		SE2		SE3		SE4		SE5		SE6		SE7		SE8		SE9		SE10	SE11	SE12	:=
### HP ML110 G3:
S1	0		105		112		118		125		131		137		147		153		157		164		169
S2	0		105		112		118		125		131		137		147		153		157		164		169
S3	0		105		112		118		125		131		137		147		153		157		164		169
S4	0		105		112		118		125		131		137		147		153		157		164		169
### HP ML110 G4:
# S1	0		86		89.4	92.6	96		99.5	102		106		108		112		114		117
# S2	0		86		89.4	92.6	96		99.5	102		106		108		112		114		117
# S3	0		86		89.4	92.6	96		99.5	102		106		108		112		114		117
# S4	0		86		89.4	92.6	96		99.5	102		106		108		112		114		117
### HP ML110 G5:
# S1	0		93.7	97		101		105		110		116		121		125		129		133		135
# S2	0		93.7	97		101		105		110		116		121		125		129		133		135
# S3	0		93.7	97		101		105		110		116		121		125		129		133		135
# S4	0		93.7	97		101		105		110		116		121		125		129		133		135
### IBM x3250 M3 (Xeon X3470):
# S1	0		41.6	46.7	52.3	57.9	65.4	73		80.7	89.5	99.6	105		113
# S2	0		41.6	46.7	52.3	57.9	65.4	73		80.7	89.5	99.6	105		113
# S3	0		41.6	46.7	52.3	57.9	65.4	73		80.7	89.5	99.6	105		113
# S4	0		41.6	46.7	52.3	57.9	65.4	73		80.7	89.5	99.6	105		113
### IBM x3250 M3 (Xeon X3480):
# S1	0		42.3	46.7	49.7	55.4	61.8	69.3	76.1	87		96.1	106		113
# S2	0		42.3	46.7	49.7	55.4	61.8	69.3	76.1	87		96.1	106		113
# S3	0		42.3	46.7	49.7	55.4	61.8	69.3	76.1	87		96.1	106		113
# S4	0		42.3	46.7	49.7	55.4	61.8	69.3	76.1	87		96.1	106		113
### IBM x3550 M3 (Xeon X5670):
# S1	0		66		107		120		131		143		156		173		191		211		229		247
# S2	0		66		107		120		131		143		156		173		191		211		229		247
# S3	0		66		107		120		131		143		156		173		191		211		229		247
# S4	0		66		107		120		131		143		156		173		191		211		229		247
### IBM x3550 M3 (Xeon X5675):
# S1	0		58.4	98		109		118		128		140		153		170		189		205		222
# S2	0		58.4	98		109		118		128		140		153		170		189		205		222
# S3	0		58.4	98		109		118		128		140		153		170		189		205		222
# S4	0		58.4	98		109		118		128		140		153		170		189		205		222
;

################## Links ##################
######### Links capacity
param link_capacity:
	LE1		LE2			:=
L1	1		40
L2	1		40
L3	1		40
L4	1		40
L5	1		40
L6	1		40
L7	1		40
L8	1		40
L9	1		40
L10	1		40
L11	1		40
L12	1		40
L13	1		40
L14	1		40
L15	1		40
L16	1		40
;
######### Links energetic cost
param link_energetic_cost:
	LE1		LE2			:=
L1	1		2#23		15
L2	1		2#17		26
L3	1		2#23		15
L4	1		2#17		26
L5	1		2#39		45
L6	1		2#33		35
L7	1		2#7		9
L8	1		2#8		8
L9	1		2#23		15
L10	1		2#17		26
L11	1		2#23		15
L12	1		2#17		26
L13	1		2#39		45
L14	1		2#33		35
L15	1		2#7		9
L16	1		2#8		8
;

################## Routers ##################
######### Routers I/O
param router_input:
	R1	R2	:=
L1	1	0
L2	0	0
L3	1	0
L4	0	0
L5	1	0
L6	0	0
L7	1	0
L8	0	0
L9	0	1
L10	0	0
L11	0	1
L12	0	0
L13	0	1
L14	0	0
L15	0	1
L16	0	0
;
param router_output:
	R1	R2	:=
L1	0	0
L2	1	0
L3	0	0
L4	1	0
L5	0	0
L6	1	0
L7	0	0
L8	1	0
L9	0	0
L10	0	1
L11	0	0
L12	0	1
L13	0	0
L14	0	1
L15	0	0
L16	0	1
;
######### Routers usage cost
param router_usage_cost :=
R1	1#100
R2	1#100
;

################## Demands ##################
######### Tasks
# param demand_tasks_used := 1;
# param demand_tasks :=
# D1	1#15
# D2	1#41
# D3	1#15
# D4	1#41
# ;
# ######### Source nodes for tasks
# param demand_tasks_source_nodes :=
# D1	1
# D2	2
# D3	3
# D4	4
# ;
# ######### Destination nodes for tasks
# param demand_tasks_destination_nodes :=
# D1	4
# D2	3
# D3	2
# D4	1
# ;
# ######### Route length for tasks (number of links)
# param demand_tasks_route_length :=
# D1	2
# D2	2
# D3	2
# D4	2
# ;

################## VMs ##################
######### VMs required efficiency
param vm_required_efficiency :=
V1	5000
V2	5000
V3	5000
V4	5000
V5	5000
V6	5000
V7	5000
V8	5000
V9	5000
V10	5000
V11	5000
V12	5000
V13	5000
V14	5000
V15	5000
V16	5000
V17	5000
V18	5000
V19	5000
V20	5000
V21	5000
V22	5000
V23	5000
V24	5000
V25	5000
V26	5000
V27	5000
V28	5000
V29	5000
V30	5000
V31	5000
V32	5000
V33	5000
V34	5000
V35	5000
V36	5000
V37	5000
V38	5000
V39	5000
V40	5000
;
######### VM required link capacity for migration
param vm_migration_required_link_capacity :=
V1	1
V2	1
V3	1
V4	1
V5	1
V6	1
V7	1
V8	1
V9	1
V10	1
V11	1
V12	1
V13	1
V14	1
V15	1
V16	1
V17	1
V18	1
V19	1
V20	1
V21	1
V22	1
V23	1
V24	1
V25	1
V26	1
V27	1
V28	1
V29	1
V30	1
V31	1
V32	1
V33	1
V34	1
V35	1
V36	1
V37	1
V38	1
V39	1
V40	1
;
######### Initial VM assignment to servers
param vm_server_assignment:
	S1	S2	S3	S4	:=
V1	1	0	0	0
V2	1	0	0	0
V3	1	0	0	0
V4	1	0	0	0
V5	1	0	0	0
V6	1	0	0	0
V7	1	0	0	0
V8	1	0	0	0
V9	0	1	0	0
V10	0	1	0	0
V11	0	1	0	0
V12	0	1	0	0
V13	0	1	0	0
V14	0	1	0	0
V15	0	1	0	0
V16	0	1	0	0
V17	0	0	1	0
V18	0	0	1	0
V19	0	0	1	0
V20	0	0	1	0
V21	0	0	1	0
V22	0	0	1	0
V23	0	0	1	0
V24	0	0	1	0
V25	0	0	0	1
V26	0	0	0	1
V27	0	0	0	1
V28	0	0	0	1
V29	0	0	0	1
V30	0	0	0	1
V31	0	0	0	1
V32	1	0	0	0
V33	1	0	0	0
V34	0	1	0	0
V35	0	1	0	0
V36	0	0	1	0
V37	0	0	1	0
V38	0	0	0	1
V39	0	0	0	1
V40	0	0	0	1
;

param vm_in_link:
     L1 L10 L11 L12 L13 L14 L15 L16  L2  L3  L4  L5  L6  L7  L8  L9    :=
V1    1   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0
V10   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V11   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V12   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V13   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V14   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V15   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V16   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V17   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V18   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V19   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V2    1   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0
V20   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V21   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V22   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V23   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V24   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V25   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V26   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V27   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V28   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V29   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V3    1   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0
V30   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V31   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V32   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V33   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V34   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V35   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V36   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V37   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V38   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V39   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V4    1   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0
V40   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V5    0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V6    0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V7    0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V8    0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
V9    0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
;